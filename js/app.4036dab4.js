(function(e){function t(t){for(var n,c,l=t[0],i=t[1],u=t[2],d=0,m=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);s&&s(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,l=1;l<o.length;l++){var i=o[l];0!==a[i]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},a={app:0},r=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/nomo/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=i;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"254b":function(e,t,o){"use strict";o("6d8f")},"309b":function(e,t,o){"use strict";o("c6ca")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function a(e,t,o,a,r,c){var l=Object(n["resolveComponent"])("Metronome");return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:["app-container",e.mode]},[Object(n["createVNode"])(l,{onPlay:c.toggleTheme},null,8,["onPlay"])],2)}var r=Object(n["withScopeId"])("data-v-e495c768");Object(n["pushScopeId"])("data-v-e495c768");var c=Object(n["createVNode"])("header",null,[Object(n["createVNode"])("h1",null,"Nomo")],-1),l=Object(n["createVNode"])("div",{class:"beat-indicator"},"Beat Indicator",-1),i=Object(n["createVNode"])("footer",null,[Object(n["createVNode"])("a",{"data-micromodal-trigger":"modal-1"},"About")],-1),u=Object(n["createVNode"])("div",{class:"modal",id:"modal-1","aria-hidden":"true"},[Object(n["createVNode"])("div",{class:"modal-overlay",tabindex:"-1","data-micromodal-close":""},[Object(n["createVNode"])("div",{class:"dialog",role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"},[Object(n["createVNode"])("header",{class:"modal-header"},[Object(n["createVNode"])("h2",{id:"modal-1-title"}," About "),Object(n["createVNode"])("button",{"aria-label":"Close modal","data-micromodal-close":"",class:"modal-close"})]),Object(n["createVNode"])("div",{id:"modal-1-content"},[Object(n["createVNode"])("p",null,"Nomo is a no-nonsense metronome."),Object(n["createVNode"])("p",null,"No ads. No popups (other than this one)."),Object(n["createVNode"])("p",null,[Object(n["createTextVNode"])("Created by "),Object(n["createVNode"])("a",{href:"https://nminchow.com"},"Nathan Minchow.")])])])])],-1);Object(n["popScopeId"])();var s=r((function(e,t,o,a,r,s){var d=Object(n["resolveComponent"])("Control"),m=Object(n["resolveComponent"])("ParameterForm");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[c,Object(n["createVNode"])("main",null,[Object(n["createVNode"])(d,{playing:r.playing,onTogglePlay:s.toggleMetronome},null,8,["playing","onTogglePlay"]),l,Object(n["createVNode"])(m,{onBpmChange:t[1]||(t[1]=function(e){return r.bpm=e}),onBarCountChange:t[2]||(t[2]=function(e){return r.barCount=e}),onBeatCountChange:t[3]||(t[3]=function(e){return r.beatCount=e}),onVolumeChange:t[4]||(t[4]=function(e){return r.masterVolume=e})})]),i,u],64)})),d=Object(n["withScopeId"])("data-v-490e25ca");Object(n["pushScopeId"])("data-v-490e25ca");var m={class:"parameterform-container"},h={class:"row"},p={class:"bpm-form"},b=Object(n["createVNode"])("label",{for:"barCount"},"Beats",-1),f={class:"bpm-form"},v=Object(n["createVNode"])("label",{for:"bpm"},"BPM",-1),g={class:"row"},O={class:"bpm-form"},j=Object(n["createVNode"])("label",{for:"Volume"},"Volume",-1);Object(n["popScopeId"])();var V=d((function(e,t,o,a,r,c){var l=Object(n["resolveComponent"])("volume-slider");return Object(n["openBlock"])(),Object(n["createBlock"])("form",m,[Object(n["createVNode"])("div",h,[Object(n["createVNode"])("div",p,[b,Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.barCount=e}),onChange:t[2]||(t[2]=function(){return c.handleBarCountChange&&c.handleBarCountChange.apply(c,arguments)}),class:"bar-count",type:"text",inputmode:"numeric",size:"1",maxlength:"2",pattern:"[0-9]*",name:"barCount",id:"barCount"},null,544),[[n["vModelText"],r.barCount]])]),Object(n["createVNode"])("div",f,[v,Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",inputmode:"numeric",name:"bpm",id:"bpm","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.bpm=e}),onChange:t[4]||(t[4]=function(){return c.handleBpmChange&&c.handleBpmChange.apply(c,arguments)})},null,544),[[n["vModelText"],r.bpm]])])]),Object(n["createVNode"])("div",g,[Object(n["createVNode"])("div",O,[j,Object(n["createVNode"])(l,{"aria-label":"Volume Slider",onChange:c.handleVolumeChange},null,8,["onChange"])])])])}));function C(e,t,o,a,r,c){var l=Object(n["resolveComponent"])("vue-slider");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.value=e}),width:"100%"},null,8,["modelValue"])}var N=o("4971"),w=o.n(N),y=(o("24df"),{components:{VueSlider:w.a},data:function(){return{value:50}}});o("bb28");y.render=C;var x=y,k={components:{VolumeSlider:x},data:function(){return{barCount:"4",beatCount:"4",bpm:"120",maxLength:"2",volume:.5}},methods:{handleBpmChange:function(){this.$emit("bpm-change",this.bpm)},handleBeatCountChange:function(){this.$emit("beat-count-change",this.beatCount)},handleBarCountChange:function(){this.$emit("bar-count-change",this.barCount)},handleVolumeChange:function(e){this.$emit("volume-change",.01*e)}}};o("254b");k.render=V,k.__scopeId="data-v-490e25ca";var B=k,T=Object(n["withScopeId"])("data-v-1942c758");Object(n["pushScopeId"])("data-v-1942c758");var S={key:0,xmlns:"http://www.w3.org/2000/svg",class:"button",viewBox:"0 0 512 512"},M=Object(n["createVNode"])("title",null,"Stop Circle",-1),P=Object(n["createVNode"])("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm80 288H176V176h160z"},null,-1),I={key:1,xmlns:"http://www.w3.org/2000/svg",class:"button",viewBox:"0 0 512 512"},_=Object(n["createVNode"])("title",null,"Play Circle",-1),A=Object(n["createVNode"])("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm-56 296V168l144 88z"},null,-1);Object(n["popScopeId"])();var q=T((function(e,t,o,a,r,c){return Object(n["openBlock"])(),Object(n["createBlock"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("toggle-play")})},[o.playing?(Object(n["openBlock"])(),Object(n["createBlock"])("svg",S,[M,P])):(Object(n["openBlock"])(),Object(n["createBlock"])("svg",I,[_,A]))])})),W={props:{playing:Boolean,handleClick:Function}};o("309b");W.render=q,W.__scopeId="data-v-1942c758";var $=W,z=o("d6bf"),F=o.n(z),L=o("8641"),U=o.n(L);function D(){return new Worker(o.p+"js/worker.2e92f8ff.worker.js")}var J=o("a1b7"),Q={name:"Metronome",components:{ParameterForm:B,Control:$},data:function(){var e=window.AudioContext;return e||alert("Nomo is not supported in this browser (requires a newer version of the Web Audio API)."),{playing:!1,lowClick:new Audio(F.a),highClick:new Audio(U.a),bpm:120,beatCount:4,barCount:4,counter:0,audioContext:new e,isPlaying:!1,startTime:null,currentTwelveletNote:null,masterVolume:.5,accentVolume:1,quarterVolume:.75,eighthVolume:0,sixteenthVolume:0,tripletVolume:0,lookahead:25,scheduleAheadTime:.1,nextNoteTime:0,noteLength:.05,notesInQueue:[],timerWorker:new D}},created:function(){var e=this.scheduler;this.timerWorker.onmessage=function(t){"tick"==t.data?e():console.log("message: "+t.data)},this.timerWorker.postMessage({interval:this.lookahead})},mounted:function(){J["a"].init()},methods:{maxBeats:function(){var e=12*this.barCount;return e},nextTwelvelet:function(){var e=60/this.bpm;this.nextNoteTime+=.08333*e,this.currentTwelveletNote++,this.currentTwelveletNote===this.maxBeats()&&(this.currentTwelveletNote=0)},calcVolume:function(e){return e*this.masterVolume},scheduleNote:function(e,t){this.notesInQueue.push({note:e,time:t});var o=this.audioContext.createOscillator(),n=this.audioContext.createGain();o.connect(n),n.connect(this.audioContext.destination),e%this.maxBeats()===0?this.accentVolume>.25?(o.frequency.value=880,n.gain.value=this.calcVolume(this.accentVolume)):(o.frequency.value=440,n.gain.value=this.calcVolume(this.quarterVolume)):e%12===0?(o.frequency.value=440,n.gain.value=this.calcVolume(this.quarterVolume)):e%6===0?(o.frequency.value=440,n.gain.value=this.calcVolume(this.eighthVolume)):e%4===0?(o.frequency.value=300,n.gain.value=this.calcVolume(this.tripletVolume)):e%3===0?(o.frequency.value=220,n.gain.value=this.calcVolume(this.sixteenthVolume)):n.gain.value=0,o.start(t),o.stop(t+this.noteLength)},scheduler:function(){while(this.nextNoteTime<this.audioContext.currentTime+this.scheduleAheadTime)this.scheduleNote(this.currentTwelveletNote,this.nextNoteTime),this.nextTwelvelet()},toggleMetronome:function(){this.playing=!this.playing,this.$emit("play"),this.playing?(this.currentTwelveletNote=0,this.nextNoteTime=this.audioContext.currentTime,this.timerWorker.postMessage("start")):this.timerWorker.postMessage("stop")}}};o("6621");Q.render=s,Q.__scopeId="data-v-e495c768";var G=Q,H=(o("f5df1"),{name:"App",components:{Metronome:G},data:function(){return{mode:"light"}},methods:{toggleTheme:function(){}}});o("5cbf");H.render=a;var E=H;Object(n["createApp"])(E).mount("#app")},"5cbf":function(e,t,o){"use strict";o("ee7f")},6621:function(e,t,o){"use strict";o("9c9a")},"6d8f":function(e,t,o){},8641:function(e,t,o){e.exports=o.p+"media/high_click.3a6d32b8.wav"},"93a2":function(e,t,o){},"9c9a":function(e,t,o){},bb28:function(e,t,o){"use strict";o("93a2")},c6ca:function(e,t,o){},d6bf:function(e,t,o){e.exports=o.p+"media/low_click.3c01c3b8.wav"},ee7f:function(e,t,o){}});
//# sourceMappingURL=app.4036dab4.js.map